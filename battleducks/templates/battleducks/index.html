{% extends "battleducks/user-info.html" %}

{% block title %}
    <title>Lobby</title>
{%  endblock %}


{% block css_and_script %}
	{% load static %}
    <link rel="stylesheet" href="{% static 'battleducks/base.css' %}">
    <link rel="stylesheet" href="{% static 'battleducks/user-info.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
    integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
    crossorigin="anonymous"></script>
    <script src="{% static 'battleducks/home.js' %}" type="text/javascript"></script>
{% endblock %}

{% block content %}
    <div class="center">
        <div>
            <button onclick="createRoom()">Create Room</button>
        </div>
        <p> What chat room would you like to enter? </p>
        <input id="room-name-input" type="text" size="100"><br>
        <input id="room-name-submit" type="button" value="Enter">
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>

    <script>
        let room_url = "{% url 'room' 'code' %}";

        document.querySelector('#room-name-input').focus();
        document.querySelector('#room-name-input').onkeyup = function(e) {
            if (e.key === 'Enter') {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
        };

        document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            window.location.pathname = '/battleducks/room/' + roomName;
        };
    </script>
{%  endblock %}